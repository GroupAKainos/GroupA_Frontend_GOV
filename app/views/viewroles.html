{% extends "layout.html" %} 
{% block pageTitle %} 
  List of Roles 
{% endblock %} 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

{% block content %}

<div class="container">

<table class="govuk-table">
  <caption class="govuk-table__caption govuk-table__caption--m">View Jobs</caption>
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">Job Role Name</th>
      <th scope="col" class="govuk-table__header">Job Capability</th>
      <th scope="col" class="govuk-table__header">Job Specification Summary</th>
      <th scope="col" class="govuk-table__header">Job Responsibility</th>
    </tr>
  </thead>

{% if roles and roles.length > 0 %} 
{% for role in roles %}

  <tbody class="govuk-table__body">
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header"><a href="{{role.specification}}">{{role.jobName}}</a></th>
      <td class="govuk-table__header">{{role.capabilityName}}</td>
      <td class="govuk-table__header govuk-!-width-one-half">{{role.specSummary}}</td>
      <td class="govuk-table__header govuk-!-width-one-half">

        {% set res = role.jobResponsibility.split('•') %}
        {% set resrows = [] %} 
        {% for r in res %}
        <p>{{r}}</p>
        {% set resrows = (resrows.push([{ text: r }]), resrows) %} 
        {% endfor %} 
        <!-- {{role.jobResponsibility.replace('•', '\n')}} -->
        
      </td>
    </tr>
    {% endfor %} 

    {% else %} 
    There are no job roles. 
    {% endif %}
      </tbody>
    </table>

  </div>

    {% endblock %} 
